<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Start</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="TO BE A BETTER MAN">
<meta property="og:type" content="website">
<meta property="og:title" content="Start">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Start">
<meta property="og:description" content="TO BE A BETTER MAN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Start">
<meta name="twitter:description" content="TO BE A BETTER MAN">
  
    <link rel="alternate" href="/atom.xml" title="Start" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Start</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-场景电台需求规格说明书[SRS]" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/16/场景电台需求规格说明书[SRS]/" class="article-date">
  <time datetime="2017-06-16T02:10:07.000Z" itemprop="datePublished">2017-06-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/16/场景电台需求规格说明书[SRS]/">场景电台需求规格说明书</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#场景电台需求规格说明书[SRS]</p>
<p>##1.需求描述</p>
<h3 style="z-index:auto;"><b>场景电台描述</b></h3>

<ul><br>    <li>头部频道标题根据每日不同时段显示不同（建议服务器返回）</li><br>    <li>上半页展示4个「当前场景」，由服务器返回</li><br>    <li>最后一个在符合条件的情况下为天气电台，规则见下方</li><br>    <li>底部「全部电台」，按照服务器返回「分类 - 列表」的形式呈现，服务端可随时调整</li><br>    <li>每个电台都包含了中文名、英文名、背景图（只是出现在当前推荐时才会呈现该图）；图片保存在服务器</li><br>    <li>进入场景电台时，判断是否有当前正在播放？如有，则使用icon标识</li><br></ul>

<h3 style="z-index:auto;"><b>「当前场景」规则说明：</b></h3>

<ul><br>    <li>仅基于当前的时间（天气电台还需要地点）</li><br>    <li>由服务端根据当前时间判断当前场景</li><br>    <li>具体判断规则，由产品向服务端提供</li><br></ul>

<h3 style="margin-top: 30px; z-index: auto;"><b>「天气场景」规则说明：</b></h3>

<ul><br>    <li>天气电台展示，需满足以下3个条件（否则不展示天气电台）：<br>    <ul><br>        <li>成功获取用户所在区县+天气数据</li><br>        <li>当前时间不属于20:00-08:00区间</li><br>        <li>获取到的天气属于小雨、中雨、大雨、雷阵雨、小雪、中雪、大雪、晴、阴等枚举数据时，才展示（该集合需产品根据天气API的枚举来进行选取）</li><br>    </ul><br>    </li><br></ul>

<h3 style="margin-top: 30px; z-index: auto;"><b>场景电台在客户端播放器形式：</b></h3>

<ul><br>    <li>进入场景电台界面，必须点击一个场景，才可开始播放</li><br>    <li>点击后展开全屏电台播放器，并自动播放此电台</li><br>    <li>正在播放时，播放中场景有特殊icon标识，点击此场景则暂停播放（点击其他场景切换播放）</li><br>    <li>关于播放列表规则：<br>    <ol><br>        <li>开始播放时，一次性从该场景全部歌曲中随机取50首并顺序播放</li><br>        <li>参考私人FM，点开当前播放列表后，不显示歌单，仅展示播放历史</li><br>        <li>当前场景50首歌播放完毕（或者播放最后一首）时，重复本规则1。</li><br>    </ol><br>    </li><br></ul>

<p>场景电台包含如下接口：<br>|接口名|接口描述|<br>|–|–|<br>|/v1.0/content/indexscene.do|获取场景电台信息-业务页面|<br>|/v1.0/content/indexscenedetails.do|获取单个场景电台歌单信息|</p>
<p>##2. 需求描述</p>
<p>###2.1 获取场景电台信息-业务页面        </p>
<p>####2.1.1 需求描述<br>通过用户首次进入app 乐库》推荐》场景电台》进入场景电台页面<br>场景电台页面本身为一个栏目，</p>
<ul>
<li>上半页的场景为当前场景和天气场景，通过获取电台接口(内容组件)</li>
<li>下半页的场景列表为内容（通过querycontentbyid去获取）(内容组件)</li>
<li>最后拼接后给前端返回</li>
<li>存储结构与栏目一致，方便刷新统一管理<br>场景列表需要缓存</li>
</ul>
<p>####2.1.2 流程分析<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Client-&gt;MIGU2.0: indexscene.do</div><div class="line">MIGU2.0-&gt;MIGU2.0: 获取下半页\n querycontentbyid</div><div class="line">MIGU2.0-&gt;content: 获取上半页</div><div class="line">content--&gt;MIGU2.0: 返回</div><div class="line">Note right of MIGU2.0: 根据当前时间\n过滤上半页返回信息</div><div class="line">Note left of MIGU2.0:拼接返回结果</div><div class="line">MIGU2.0--&gt;Client:</div></pre></td></tr></table></figure></p>
<p>####2.1.3 内部实现逻辑（流程图）<br>略</p>
<p>####2.1.4 接口设计<br>Req:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|weather|天气信息|是|此处需要<strong>前端</strong>给出天气的枚举列表|<br>Rep:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|code|返回码|是|000000|<br>|info|返回描述|是|成功|<br>|now|ColumnInfo|是|当前场景|<br>|all|ColumnInfo|是|全部场景|</p>
<p>####2.1.5 表结构设计<br>将场景电台的栏目插入配置表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">INSERT INTO `music`.`t_migu_columnid_url` (</div><div class="line">	`columnid`,</div><div class="line">	`columnname`,</div><div class="line">	`servicepath`,</div><div class="line">	`ua`,</div><div class="line">	`version`,</div><div class="line">	`test`,</div><div class="line">	`status`,</div><div class="line">	`inserttime`</div><div class="line">)</div><div class="line">VALUES</div><div class="line">	(</div><div class="line">		&apos;xxxxx&apos;,</div><div class="line">		&apos;场景电台&apos;,</div><div class="line">		&apos;/v1.0/content/indexscene.do&apos;,</div><div class="line">		&apos;Android_migu&apos;,</div><div class="line">		&apos;1.0&apos;,</div><div class="line">		&apos;01&apos;,</div><div class="line">		&apos;1&apos;,</div><div class="line">		&apos;2017-5-25 16:56:54&apos;</div><div class="line">	);</div><div class="line"></div><div class="line">INSERT INTO `music`.`t_migu_columnid_url` (</div><div class="line">	`columnid`,</div><div class="line">	`columnname`,</div><div class="line">	`servicepath`,</div><div class="line">	`ua`,</div><div class="line">	`version`,</div><div class="line">	`test`,</div><div class="line">	`status`,</div><div class="line">	`inserttime`</div><div class="line">)</div><div class="line">VALUES</div><div class="line">	(</div><div class="line">		&apos;xxxxx&apos;,</div><div class="line">		&apos;场景电台&apos;,</div><div class="line">		&apos;/v1.0/content/indexscene.do&apos;,</div><div class="line">		&apos;Ios_migu&apos;,</div><div class="line">		&apos;1.0&apos;,</div><div class="line">		&apos;01&apos;,</div><div class="line">		&apos;1&apos;,</div><div class="line">		&apos;2017-5-25 16:56:54&apos;</div><div class="line">	);</div></pre></td></tr></table></figure></p>
<p>创建tag表用来枚举天气的类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE `t_migu_tag` (</div><div class="line">`columnid`  int(20) NOT NULL COMMENT &apos;栏目id&apos; ,</div><div class="line">`tag`  varchar(255) NOT NULL COMMENT &apos;tag的描述&apos; ,</div><div class="line">`ua`  varchar(255) NOT NULL COMMENT &apos;ua&apos; ,</div><div class="line">`test`  varchar(2) NOT NULL ,</div><div class="line">PRIMARY KEY (`columnid`)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>####2.1.6 测试要点<br>1.对应的时间段返回对应的当前场景。<br>2.对应的天气返回对应的天气场景。<br>3.在限定时间段(20:00到次日8:00)内不返回天气场景。<br>4.不同channel 不同省份信息，test=01以及其他,cities.</p>
<p>####2.1.7 性能测试</p>
<p>###2.2 获取单个场景电台歌单信息</p>
<p>####2.2.1 需求描述<br>点击场景电台进入场景电台的播放页面，返回一个歌单类型的栏目，<br>需要将其中随机取50首歌曲发出。</p>
<p>####2.2.2 流程分析<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Client-&gt;MIGU2.0: indexscenedetails.do</div><div class="line">MIGU2.0-&gt;MIGU2.0: 获取场景电台的歌单\n querycontentbyid</div><div class="line">Note over MIGU2.0: 将原始数据取出后\n拼出随机50首填回</div><div class="line">MIGU2.0--&gt;Client:返回结果</div></pre></td></tr></table></figure></p>
<p>####2.2.3 内部实现逻辑（流程图）<br>略</p>
<p>####2.2.4 接口设计<br>Req:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|columnId|电台栏目id|是|必须是电台栏目id|<br>Rep:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|code|返回码|是|000000|<br>|info|返回描述|是|成功|<br>|columnInfo|ColumnInfo|是|栏目|<br>返回的样子跟现在querycontentbyid返回的样子一模一样。</p>
<p>####2.2.5 表结构设计<br>无</p>
<p>####2.2.6 测试要点<br>1.对应场景的id传错了<br>2.对应场景的歌曲少于50首<br>3.对应场景的歌曲多于50首</p>
<p>####2.2.7 性能测试<br>无</p>
<p>##3. 修订记录<br>|日期|修订版本|修改描述|作者|<br>|–|–|–|–|<br>|20170524|v1.0|初稿完成|王晟|</p>
<p>##4.常量描述<br>测试环境</p>
<table>
<thead>
<tr>
<th>Tagid</th>
<th>Tag描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>15295581</td>
<td>下雨</td>
</tr>
<tr>
<td>15295739</td>
<td>大风</td>
</tr>
<tr>
<td>15295659</td>
<td>阴天</td>
</tr>
<tr>
<td>15295759</td>
<td>雾</td>
</tr>
<tr>
<td>15295558</td>
<td>晴天</td>
</tr>
<tr>
<td>15295721</td>
<td>下雪</td>
</tr>
</tbody>
</table>
<p>生产环境</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/16/场景电台需求规格说明书[SRS]/" data-id="cj3z8yvvv0001qsd4i0ccbn2q" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-第一篇文章" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/16/第一篇文章/" class="article-date">
  <time datetime="2017-06-16T01:10:07.000Z" itemprop="datePublished">2017-06-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/16/第一篇文章/">第一篇文章</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/16/第一篇文章/" data-id="cj3z8yvvx0002qsd4r7ucvd6b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/14/hello-world/" class="article-date">
  <time datetime="2017-06-14T06:06:50.611Z" itemprop="datePublished">2017-06-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/14/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/14/hello-world/" data-id="cj3z8yvvq0000qsd4x1fsih56" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/06/16/场景电台需求规格说明书[SRS]/">场景电台需求规格说明书</a>
          </li>
        
          <li>
            <a href="/2017/06/16/第一篇文章/">第一篇文章</a>
          </li>
        
          <li>
            <a href="/2017/06/14/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 WS BIG<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>