<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="TO BE A BETTER MAN">
<meta property="og:type" content="website">
<meta property="og:title" content="Start">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Start">
<meta property="og:description" content="TO BE A BETTER MAN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Start">
<meta name="twitter:description" content="TO BE A BETTER MAN">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Start</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Start</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/19/0619-01日日志/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WS BIG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Start">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/19/0619-01日日志/" itemprop="url">0619_01日日志</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-19T10:19:34+08:00">
                2017-06-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>asdasd<br><img src="/2017/06/19/0619-01日日志/timg.jpg" alt="This is an example image" title="This is an example image"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/19/0619日日志/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WS BIG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Start">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/19/0619日日志/" itemprop="url">0619日日志</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-19T09:42:45+08:00">
                2017-06-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>asdasd<br></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/16/test2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WS BIG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Start">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/16/test2/" itemprop="url">test2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-16T10:48:49+08:00">
                2017-06-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="场景电台需求规格说明书-SRS"><a href="#场景电台需求规格说明书-SRS" class="headerlink" title="场景电台需求规格说明书[SRS]"></a>场景电台需求规格说明书[SRS]</h1><h2 id="1-需求描述"><a href="#1-需求描述" class="headerlink" title="1.需求描述"></a>1.需求描述</h2><h3 style="z-index:auto;"><b>场景电台描述</b></h3>

<ul><br>    <li>头部频道标题根据每日不同时段显示不同（建议服务器返回）</li><br>    <li>上半页展示4个「当前场景」，由服务器返回</li><br>    <li>最后一个在符合条件的情况下为天气电台，规则见下方</li><br>    <li>底部「全部电台」，按照服务器返回「分类 - 列表」的形式呈现，服务端可随时调整</li><br>    <li>每个电台都包含了中文名、英文名、背景图（只是出现在当前推荐时才会呈现该图）；图片保存在服务器</li><br>    <li>进入场景电台时，判断是否有当前正在播放？如有，则使用icon标识</li><br></ul>

<h3 style="z-index:auto;"><b>「当前场景」规则说明：</b></h3>

<ul><br>    <li>仅基于当前的时间（天气电台还需要地点）</li><br>    <li>由服务端根据当前时间判断当前场景</li><br>    <li>具体判断规则，由产品向服务端提供</li><br></ul>

<h3 style="margin-top: 30px; z-index: auto;"><b>「天气场景」规则说明：</b></h3>

<ul><br>    <li>天气电台展示，需满足以下3个条件（否则不展示天气电台）：<br>    <ul><br>        <li>成功获取用户所在区县+天气数据</li><br>        <li>当前时间不属于20:00-08:00区间</li><br>        <li>获取到的天气属于小雨、中雨、大雨、雷阵雨、小雪、中雪、大雪、晴、阴等枚举数据时，才展示（该集合需产品根据天气API的枚举来进行选取）</li><br>    </ul><br>    </li><br></ul>

<h3 style="margin-top: 30px; z-index: auto;"><b>场景电台在客户端播放器形式：</b></h3>

<ul><br>    <li>进入场景电台界面，必须点击一个场景，才可开始播放</li><br>    <li>点击后展开全屏电台播放器，并自动播放此电台</li><br>    <li>正在播放时，播放中场景有特殊icon标识，点击此场景则暂停播放（点击其他场景切换播放）</li><br>    <li>关于播放列表规则：<br>    <ol><br>        <li>开始播放时，一次性从该场景全部歌曲中随机取50首并顺序播放</li><br>        <li>参考私人FM，点开当前播放列表后，不显示歌单，仅展示播放历史</li><br>        <li>当前场景50首歌播放完毕（或者播放最后一首）时，重复本规则1。</li><br>    </ol><br>    </li><br></ul>

<p>场景电台包含如下接口：<br>|接口名|接口描述|<br>|–|–|<br>|/v1.0/content/indexscene.do|获取场景电台信息-业务页面|<br>|/v1.0/content/indexscenedetails.do|获取单个场景电台歌单信息|</p>
<p>##2. 需求描述</p>
<p>###2.1 获取场景电台信息-业务页面        </p>
<p>####2.1.1 需求描述<br>通过用户首次进入app 乐库》推荐》场景电台》进入场景电台页面<br>场景电台页面本身为一个栏目，</p>
<ul>
<li>上半页的场景为当前场景和天气场景，通过获取电台接口(内容组件)</li>
<li>下半页的场景列表为内容（通过querycontentbyid去获取）(内容组件)</li>
<li>最后拼接后给前端返回</li>
<li>存储结构与栏目一致，方便刷新统一管理<br>场景列表需要缓存</li>
</ul>
<p>####2.1.2 流程分析<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Client-&gt;MIGU2.0: indexscene.do</div><div class="line">MIGU2.0-&gt;MIGU2.0: 获取下半页\n querycontentbyid</div><div class="line">MIGU2.0-&gt;content: 获取上半页</div><div class="line">content--&gt;MIGU2.0: 返回</div><div class="line">Note right of MIGU2.0: 根据当前时间\n过滤上半页返回信息</div><div class="line">Note left of MIGU2.0:拼接返回结果</div><div class="line">MIGU2.0--&gt;Client:</div></pre></td></tr></table></figure></p>
<p>####2.1.3 内部实现逻辑（流程图）<br>略</p>
<p>####2.1.4 接口设计<br>Req:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|weather|天气信息|是|此处需要<strong>前端</strong>给出天气的枚举列表|<br>Rep:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|code|返回码|是|000000|<br>|info|返回描述|是|成功|<br>|now|ColumnInfo|是|当前场景|<br>|all|ColumnInfo|是|全部场景|</p>
<p>####2.1.5 表结构设计<br>将场景电台的栏目插入配置表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">INSERT INTO `music`.`t_migu_columnid_url` (</div><div class="line">	`columnid`,</div><div class="line">	`columnname`,</div><div class="line">	`servicepath`,</div><div class="line">	`ua`,</div><div class="line">	`version`,</div><div class="line">	`test`,</div><div class="line">	`status`,</div><div class="line">	`inserttime`</div><div class="line">)</div><div class="line">VALUES</div><div class="line">	(</div><div class="line">		&apos;xxxxx&apos;,</div><div class="line">		&apos;场景电台&apos;,</div><div class="line">		&apos;/v1.0/content/indexscene.do&apos;,</div><div class="line">		&apos;Android_migu&apos;,</div><div class="line">		&apos;1.0&apos;,</div><div class="line">		&apos;01&apos;,</div><div class="line">		&apos;1&apos;,</div><div class="line">		&apos;2017-5-25 16:56:54&apos;</div><div class="line">	);</div><div class="line"></div><div class="line">INSERT INTO `music`.`t_migu_columnid_url` (</div><div class="line">	`columnid`,</div><div class="line">	`columnname`,</div><div class="line">	`servicepath`,</div><div class="line">	`ua`,</div><div class="line">	`version`,</div><div class="line">	`test`,</div><div class="line">	`status`,</div><div class="line">	`inserttime`</div><div class="line">)</div><div class="line">VALUES</div><div class="line">	(</div><div class="line">		&apos;xxxxx&apos;,</div><div class="line">		&apos;场景电台&apos;,</div><div class="line">		&apos;/v1.0/content/indexscene.do&apos;,</div><div class="line">		&apos;Ios_migu&apos;,</div><div class="line">		&apos;1.0&apos;,</div><div class="line">		&apos;01&apos;,</div><div class="line">		&apos;1&apos;,</div><div class="line">		&apos;2017-5-25 16:56:54&apos;</div><div class="line">	);</div></pre></td></tr></table></figure></p>
<p>创建tag表用来枚举天气的类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE `t_migu_tag` (</div><div class="line">`columnid`  int(20) NOT NULL COMMENT &apos;栏目id&apos; ,</div><div class="line">`tag`  varchar(255) NOT NULL COMMENT &apos;tag的描述&apos; ,</div><div class="line">`ua`  varchar(255) NOT NULL COMMENT &apos;ua&apos; ,</div><div class="line">`test`  varchar(2) NOT NULL ,</div><div class="line">PRIMARY KEY (`columnid`)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>####2.1.6 测试要点<br>1.对应的时间段返回对应的当前场景。<br>2.对应的天气返回对应的天气场景。<br>3.在限定时间段(20:00到次日8:00)内不返回天气场景。<br>4.不同channel 不同省份信息，test=01以及其他,cities.</p>
<p>####2.1.7 性能测试</p>
<p>###2.2 获取单个场景电台歌单信息</p>
<p>####2.2.1 需求描述<br>点击场景电台进入场景电台的播放页面，返回一个歌单类型的栏目，<br>需要将其中随机取50首歌曲发出。</p>
<p>####2.2.2 流程分析<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Client-&gt;MIGU2.0: indexscenedetails.do</div><div class="line">MIGU2.0-&gt;MIGU2.0: 获取场景电台的歌单\n querycontentbyid</div><div class="line">Note over MIGU2.0: 将原始数据取出后\n拼出随机50首填回</div><div class="line">MIGU2.0--&gt;Client:返回结果</div></pre></td></tr></table></figure></p>
<p>####2.2.3 内部实现逻辑（流程图）<br>略</p>
<p>####2.2.4 接口设计<br>Req:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|columnId|电台栏目id|是|必须是电台栏目id|<br>Rep:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|code|返回码|是|000000|<br>|info|返回描述|是|成功|<br>|columnInfo|ColumnInfo|是|栏目|<br>返回的样子跟现在querycontentbyid返回的样子一模一样。</p>
<p>####2.2.5 表结构设计<br>无</p>
<p>####2.2.6 测试要点<br>1.对应场景的id传错了<br>2.对应场景的歌曲少于50首<br>3.对应场景的歌曲多于50首</p>
<p>####2.2.7 性能测试<br>无</p>
<p>##3. 修订记录<br>|日期|修订版本|修改描述|作者|<br>|–|–|–|–|<br>|20170524|v1.0|初稿完成|王晟|</p>
<p>##4.常量描述<br>测试环境</p>
<table>
<thead>
<tr>
<th>Tagid</th>
<th>Tag描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>15295581</td>
<td>下雨</td>
</tr>
<tr>
<td>15295739</td>
<td>大风</td>
</tr>
<tr>
<td>15295659</td>
<td>阴天</td>
</tr>
<tr>
<td>15295759</td>
<td>雾</td>
</tr>
<tr>
<td>15295558</td>
<td>晴天</td>
</tr>
<tr>
<td>15295721</td>
<td>下雪</td>
</tr>
</tbody>
</table>
<p>生产环境</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/16/场景电台需求规格说明书[SRS]/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WS BIG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Start">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/16/场景电台需求规格说明书[SRS]/" itemprop="url">场景电台需求规格说明书</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-16T10:10:07+08:00">
                2017-06-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#场景电台需求规格说明书[SRS]</p>
<p>##1.需求描述</p>
<h3 style="z-index:auto;"><b>场景电台描述</b></h3>

<ul><br>    <li>头部频道标题根据每日不同时段显示不同（建议服务器返回）</li><br>    <li>上半页展示4个「当前场景」，由服务器返回</li><br>    <li>最后一个在符合条件的情况下为天气电台，规则见下方</li><br>    <li>底部「全部电台」，按照服务器返回「分类 - 列表」的形式呈现，服务端可随时调整</li><br>    <li>每个电台都包含了中文名、英文名、背景图（只是出现在当前推荐时才会呈现该图）；图片保存在服务器</li><br>    <li>进入场景电台时，判断是否有当前正在播放？如有，则使用icon标识</li><br></ul>

<h3 style="z-index:auto;"><b>「当前场景」规则说明：</b></h3>

<ul><br>    <li>仅基于当前的时间（天气电台还需要地点）</li><br>    <li>由服务端根据当前时间判断当前场景</li><br>    <li>具体判断规则，由产品向服务端提供</li><br></ul>

<h3 style="margin-top: 30px; z-index: auto;"><b>「天气场景」规则说明：</b></h3>

<ul><br>    <li>天气电台展示，需满足以下3个条件（否则不展示天气电台）：<br>    <ul><br>        <li>成功获取用户所在区县+天气数据</li><br>        <li>当前时间不属于20:00-08:00区间</li><br>        <li>获取到的天气属于小雨、中雨、大雨、雷阵雨、小雪、中雪、大雪、晴、阴等枚举数据时，才展示（该集合需产品根据天气API的枚举来进行选取）</li><br>    </ul><br>    </li><br></ul>

<h3 style="margin-top: 30px; z-index: auto;"><b>场景电台在客户端播放器形式：</b></h3>

<ul><br>    <li>进入场景电台界面，必须点击一个场景，才可开始播放</li><br>    <li>点击后展开全屏电台播放器，并自动播放此电台</li><br>    <li>正在播放时，播放中场景有特殊icon标识，点击此场景则暂停播放（点击其他场景切换播放）</li><br>    <li>关于播放列表规则：<br>    <ol><br>        <li>开始播放时，一次性从该场景全部歌曲中随机取50首并顺序播放</li><br>        <li>参考私人FM，点开当前播放列表后，不显示歌单，仅展示播放历史</li><br>        <li>当前场景50首歌播放完毕（或者播放最后一首）时，重复本规则1。</li><br>    </ol><br>    </li><br></ul>

<p>场景电台包含如下接口：<br>|接口名|接口描述|<br>|–|–|<br>|/v1.0/content/indexscene.do|获取场景电台信息-业务页面|<br>|/v1.0/content/indexscenedetails.do|获取单个场景电台歌单信息|</p>
<p>##2. 需求描述</p>
<p>###2.1 获取场景电台信息-业务页面        </p>
<p>####2.1.1 需求描述<br>通过用户首次进入app 乐库》推荐》场景电台》进入场景电台页面<br>场景电台页面本身为一个栏目，</p>
<ul>
<li>上半页的场景为当前场景和天气场景，通过获取电台接口(内容组件)</li>
<li>下半页的场景列表为内容（通过querycontentbyid去获取）(内容组件)</li>
<li>最后拼接后给前端返回</li>
<li>存储结构与栏目一致，方便刷新统一管理<br>场景列表需要缓存</li>
</ul>
<p>####2.1.2 流程分析<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Client-&gt;MIGU2.0: indexscene.do</div><div class="line">MIGU2.0-&gt;MIGU2.0: 获取下半页\n querycontentbyid</div><div class="line">MIGU2.0-&gt;content: 获取上半页</div><div class="line">content--&gt;MIGU2.0: 返回</div><div class="line">Note right of MIGU2.0: 根据当前时间\n过滤上半页返回信息</div><div class="line">Note left of MIGU2.0:拼接返回结果</div><div class="line">MIGU2.0--&gt;Client:</div></pre></td></tr></table></figure></p>
<p>####2.1.3 内部实现逻辑（流程图）<br>略</p>
<p>####2.1.4 接口设计<br>Req:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|weather|天气信息|是|此处需要<strong>前端</strong>给出天气的枚举列表|<br>Rep:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|code|返回码|是|000000|<br>|info|返回描述|是|成功|<br>|now|ColumnInfo|是|当前场景|<br>|all|ColumnInfo|是|全部场景|</p>
<p>####2.1.5 表结构设计<br>将场景电台的栏目插入配置表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">INSERT INTO `music`.`t_migu_columnid_url` (</div><div class="line">	`columnid`,</div><div class="line">	`columnname`,</div><div class="line">	`servicepath`,</div><div class="line">	`ua`,</div><div class="line">	`version`,</div><div class="line">	`test`,</div><div class="line">	`status`,</div><div class="line">	`inserttime`</div><div class="line">)</div><div class="line">VALUES</div><div class="line">	(</div><div class="line">		&apos;xxxxx&apos;,</div><div class="line">		&apos;场景电台&apos;,</div><div class="line">		&apos;/v1.0/content/indexscene.do&apos;,</div><div class="line">		&apos;Android_migu&apos;,</div><div class="line">		&apos;1.0&apos;,</div><div class="line">		&apos;01&apos;,</div><div class="line">		&apos;1&apos;,</div><div class="line">		&apos;2017-5-25 16:56:54&apos;</div><div class="line">	);</div><div class="line"></div><div class="line">INSERT INTO `music`.`t_migu_columnid_url` (</div><div class="line">	`columnid`,</div><div class="line">	`columnname`,</div><div class="line">	`servicepath`,</div><div class="line">	`ua`,</div><div class="line">	`version`,</div><div class="line">	`test`,</div><div class="line">	`status`,</div><div class="line">	`inserttime`</div><div class="line">)</div><div class="line">VALUES</div><div class="line">	(</div><div class="line">		&apos;xxxxx&apos;,</div><div class="line">		&apos;场景电台&apos;,</div><div class="line">		&apos;/v1.0/content/indexscene.do&apos;,</div><div class="line">		&apos;Ios_migu&apos;,</div><div class="line">		&apos;1.0&apos;,</div><div class="line">		&apos;01&apos;,</div><div class="line">		&apos;1&apos;,</div><div class="line">		&apos;2017-5-25 16:56:54&apos;</div><div class="line">	);</div></pre></td></tr></table></figure></p>
<p>创建tag表用来枚举天气的类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE `t_migu_tag` (</div><div class="line">`columnid`  int(20) NOT NULL COMMENT &apos;栏目id&apos; ,</div><div class="line">`tag`  varchar(255) NOT NULL COMMENT &apos;tag的描述&apos; ,</div><div class="line">`ua`  varchar(255) NOT NULL COMMENT &apos;ua&apos; ,</div><div class="line">`test`  varchar(2) NOT NULL ,</div><div class="line">PRIMARY KEY (`columnid`)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>####2.1.6 测试要点<br>1.对应的时间段返回对应的当前场景。<br>2.对应的天气返回对应的天气场景。<br>3.在限定时间段(20:00到次日8:00)内不返回天气场景。<br>4.不同channel 不同省份信息，test=01以及其他,cities.</p>
<p>####2.1.7 性能测试</p>
<p>###2.2 获取单个场景电台歌单信息</p>
<p>####2.2.1 需求描述<br>点击场景电台进入场景电台的播放页面，返回一个歌单类型的栏目，<br>需要将其中随机取50首歌曲发出。</p>
<p>####2.2.2 流程分析<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Client-&gt;MIGU2.0: indexscenedetails.do</div><div class="line">MIGU2.0-&gt;MIGU2.0: 获取场景电台的歌单\n querycontentbyid</div><div class="line">Note over MIGU2.0: 将原始数据取出后\n拼出随机50首填回</div><div class="line">MIGU2.0--&gt;Client:返回结果</div></pre></td></tr></table></figure></p>
<p>####2.2.3 内部实现逻辑（流程图）<br>略</p>
<p>####2.2.4 接口设计<br>Req:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|columnId|电台栏目id|是|必须是电台栏目id|<br>Rep:<br>|参数名称|说明|是否必须|备注|<br>|–|–|–|–|<br>|code|返回码|是|000000|<br>|info|返回描述|是|成功|<br>|columnInfo|ColumnInfo|是|栏目|<br>返回的样子跟现在querycontentbyid返回的样子一模一样。</p>
<p>####2.2.5 表结构设计<br>无</p>
<p>####2.2.6 测试要点<br>1.对应场景的id传错了<br>2.对应场景的歌曲少于50首<br>3.对应场景的歌曲多于50首</p>
<p>####2.2.7 性能测试<br>无</p>
<p>##3. 修订记录<br>|日期|修订版本|修改描述|作者|<br>|–|–|–|–|<br>|20170524|v1.0|初稿完成|王晟|</p>
<p>##4.常量描述<br>测试环境</p>
<table>
<thead>
<tr>
<th>Tagid</th>
<th>Tag描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>15295581</td>
<td>下雨</td>
</tr>
<tr>
<td>15295739</td>
<td>大风</td>
</tr>
<tr>
<td>15295659</td>
<td>阴天</td>
</tr>
<tr>
<td>15295759</td>
<td>雾</td>
</tr>
<tr>
<td>15295558</td>
<td>晴天</td>
</tr>
<tr>
<td>15295721</td>
<td>下雪</td>
</tr>
</tbody>
</table>
<p>生产环境</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/16/第一篇文章/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WS BIG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Start">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/16/第一篇文章/" itemprop="url">第一篇文章</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-16T09:10:07+08:00">
                2017-06-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/14/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WS BIG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Start">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/14/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-14T14:06:50+08:00">
                2017-06-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="WS BIG" />
          <p class="site-author-name" itemprop="name">WS BIG</p>
           
              <p class="site-description motion-element" itemprop="description">TO BE A BETTER MAN</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">Artikel</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WS BIG</span>
</div>


<div class="powered-by">
  Erstellt mit  <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
